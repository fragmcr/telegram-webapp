<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—è Telegram –¢–∞–ø–∞–ª–∫–∞</title>
    
    <style>
        /* –û–°–ù–û–í–ù–û–ô –°–¢–ò–õ–¨ */
        body {
            /* –ù–æ–≤—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω */
            background: linear-gradient(135deg, #1f1c2c 0%, #000000 100%); 
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            user-select: none;
            box-sizing: border-box;
            position: relative;
        }

        .app-container {
            width: 100%;
            max-width: 500px;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-radius: 20px;
            background-color: rgba(0, 0, 0, 0.3);
            position: relative;
        }

        /* –ö–û–ù–¢–ï–ô–ù–ï–† –î–õ–Ø –ö–ù–û–ü–û–ö –°–ü–†–ê–í–ê */
        .header-right {
            position: absolute;
            top: 10px;
            right: 15px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px; 
            z-index: 5;
        }
        
        /* –ö–ù–û–ü–ö–ò –®–ê–ü–ö–ò */
        .header-btn {
            padding: 5px 10px;
            background-color: rgba(255, 255, 255, 0.1);
            color: #ccc;
            border: none;
            border-radius: 10px;
            font-size: 0.9em;
            cursor: pointer;
            transition: background-color 0.2s;
            white-space: nowrap;
        }

        .header-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* ID –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø */
        #user-id-display {
            padding: 5px 10px;
            background-color: rgba(255, 255, 255, 0.1);
            color: #ccc;
            border-radius: 10px;
            font-size: 0.9em;
        }

        /* –ö–ù–û–ü–ö–ê –õ–ò–î–ï–†–û–í (–°–ª–µ–≤–∞) */
        #leaderboard-button {
            position: absolute;
            top: 10px;
            left: 15px;
            padding: 8px 12px;
            background-color: #00FFFF;
            color: #000;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
            z-index: 5;
        }

        #leaderboard-button:hover {
            background-color: #00b3b3;
        }

        /* –°–¢–ò–õ–¨ –°–ß–ï–¢–ê */
        #score-display {
            font-size: 3.5em;
            margin-bottom: 40px;
            font-weight: 900;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
        }

        /* –¢–ê–ü–ê–ï–ú–´–ô –ö–†–£–ì */
        #tap-target {
            /* –£–í–ï–õ–ò–ß–ï–ù–ù–´–ô –†–ê–ó–ú–ï–† */
            width: 450px; 
            height: 450px; 
            /* ------------------- */
            cursor: pointer;
            border-radius: 50%;
            background-image: url('flag.png'); 
            background-size: cover; 
            background-position: center; 
            background-repeat: no-repeat; 
            box-shadow: 
                0 0 30px rgba(0, 255, 255, 0.8), 
                0 0 60px rgba(0, 255, 255, 0.4); 
            transition: transform 0.05s ease;
            border: 5px solid #00FFFF; 
        }

        .tapped {
            transform: scale(0.92); 
            box-shadow: 
                0 0 50px rgba(255, 255, 0, 0.9), 
                0 0 80px rgba(255, 165, 0, 0.5);
            border-color: #FFD700;
        }

        /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û (–û–±—â–µ–µ) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none; 
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: #2c2c2c;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 25px rgba(0, 255, 255, 0.5);
            color: #ffffff;
            animation: fadeIn 0.3s ease-out;
            max-height: 80vh;
            overflow-y: auto;
            position: relative; 
        }
        
        /* –ö–ù–û–ü–ö–ê –ó–ê–ö–†–´–¢–ò–Ø (–ö–†–ï–°–¢–ò–ö) */
        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5em;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            line-height: 1; 
            transition: color 0.2s;
        }
        
        .close-btn:hover {
            color: #ffffff;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π */
        #achievement-detail-modal h4 {
            font-size: 1.8em;
            color: #FFD700;
            margin-top: 0;
            text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
        }
        
        /* –ù–û–í–´–ô –°–¢–ò–õ–¨ –î–õ–Ø –ò–ö–û–ù–ö–ò –î–û–°–¢–ò–ñ–ï–ù–ò–Ø –í –ú–û–î–ê–õ–ï */
        .achievement-detail-icon {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            object-fit: cover;
            margin-bottom: 15px;
        }
        /* /–ù–û–í–´–ô –°–¢–ò–õ–¨ */

        /* –°—Ç–∏–ª–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–∫–Ω–∞ "–ú–æ–∏ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è" */
        .achievement-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px dashed #444;
            opacity: 0.6;
            cursor: pointer; 
            transition: background-color 0.1s;
        }
        
        .achievement-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .achievement-item.achieved {
            opacity: 1;
        }

        /* –°–¢–ò–õ–¨ –¢–ê–ë–õ–ò–¶–´ –õ–ò–î–ï–†–û–í */
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .leaderboard-table th, .leaderboard-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #444;
        }

        .leaderboard-table th {
            background-color: #1f1c2c;
            color: #00FFFF;
        }
        
        .leaderboard-table tr:nth-child(even) {
            background-color: #383838;
        }
        
        .leaderboard-table tr:hover {
            background-color: #4a4a4a;
        }

        /* –ê–ù–ò–ú–ê–¶–ò–ò */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes flyup {
            0% { opacity: 1; transform: translate(-50%, 0); }
            100% { opacity: 0; transform: translate(-50%, -120px); } 
            }
    </style>
</head>
<body>

    <div class="app-container">
        
        <div class="header-right">
            <div id="user-id-display">ID: </div>
            <button id="achievements-button" class="header-btn">üèÜ –ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
        </div>
        
        <button id="leaderboard-button">–¢–∞–±–ª–∏—Ü–∞ –ø–æ–º–æ—â–Ω–∏–∫–æ–≤</button>

        <div id="score-display">0</div>

        <img 
            id="tap-target" 
            src="gaz2.png" 
            alt="–ü–µ—Ä—Å–æ–Ω–∞–∂ –¥–ª—è —Ç–∞–ø–∞–Ω—å—è"
        >

    </div>
    
    <div id="welcome-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('welcome-modal')">&times;</span> 
            
            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
            <p>
                –í–∞—Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç–∞–ø–∞–Ω—å—è! –ù–∞—á–Ω–∏—Ç–µ –Ω–∞–∂–∏–º–∞—Ç—å –Ω–∞ –∫—Ä—É–≥, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –æ—á–∫–∏. –í–∞—à —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É. –£–¥–∞—á–∏!
            </p>
            <button onclick="closeModal('welcome-modal')" style="display: block; width: 100%; padding: 10px; background-color: #00FFFF; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 20px;">–ù–∞—á–∞—Ç—å —Ç–∞–ø–∞—Ç—å</button>
        </div>
    </div>
    
    <div id="leaderboard-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('leaderboard-modal')">&times;</span> 

            <h2>ü•á –¢–∞–±–ª–∏—Ü–∞ –ø–æ–º–æ—â–Ω–∏–∫–æ–≤</h2>
            <p style="color: #FFD700; font-size: 0.9em;">
                *–í–Ω–∏–º–∞–Ω–∏–µ: –î–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ ‚Äî **–ø—Ä–∏–º–µ—Ä–Ω—ã–µ**. –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä!
            </p>
            <table class="leaderboard-table" id="leaderboard-data">
                </table>
            <button onclick="closeModal('leaderboard-modal')" style="display: block; width: 100%; padding: 10px; background-color: #FF6347; color: #fff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div id="achievements-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('achievements-modal')">&times;</span>
            
            <h2>üèÜ –ú–æ–∏ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
            
            <h3 style="color: #FFD700; border-bottom: 2px solid #FFD700; padding-bottom: 5px; margin-top: 10px;">–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ</h3>
            <div id="achieved-list">
                </div>

            <h3 style="color: #777; border-bottom: 2px solid #777; padding-bottom: 5px; margin-top: 20px;">–ï—â–µ –Ω–µ –∑–∞—Å–ª—É–∂–∏–ª–∏</h3>
            <div id="unachieved-list">
                </div>
        </div>
    </div>
    
    <div id="achievement-detail-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('achievement-detail-modal')">&times;</span>
            
            <h4 id="achievement-detail-title"></h4>
            <div id="achievement-detail-description"></div> 
        </div>
    </div>

    <script>
        // --- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ---
        const IMAGE_IDLE = 'gaz2.png'; 
        const IMAGE_TAPPED = 'gaz1.png'; 
        const STORAGE_KEY_SCORE = 'tap_game_score';
        const STORAGE_KEY_ID = 'tap_game_user_id';
        
        // –°–ü–ò–°–û–ö –î–û–°–¢–ò–ñ–ï–ù–ò–ô
        const ACHIEVEMENTS = [
            { name: "–ü–µ—Ä–≤–∞—è —Ü–∏—Å—Ç–µ—Ä–Ω–∞", threshold: 200, description: "–¢–∞–ø–Ω–∏ 200 —Ä–∞–∑ –∏ –ø—Ä–∏–≥–æ–Ω–∏ —Ü–∏—Å—Ç–µ—Ä–Ω—É." },
            { name: "–ö–æ—Ç—ë–ª –Ω–∞–¥–µ–∂–¥—ã", threshold: 500, description: "–¢–∞–ø–Ω–∏ 500 —Ä–∞–∑ —á—Ç–æ –±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ì–ê–ó –ø–æ —Ç—Ä—É–±–µ –Ω–∞ —Å—Ç–∞—Ä–æ–π –≥–∞–∑–æ–≤–æ–π –∫–æ—Ç–µ–ª—å–Ω–æ–π." },
            { name: "–î–∏–ø–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–∞–ø", threshold: 1000, description: "–¢–∞–ø–Ω–∏ 1 000 , –ø–æ–∫–∞ –æ–Ω –≥–æ–≤–æ—Ä–∏—Ç: ¬´–ú—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–∞—à –≤–æ–ø—Ä–æ—Å¬ª." },
            { name: "–ù–∞–π–¥–∏ –ª–∏—à–Ω—é—é —Ç—Ä—É–±—É", threshold: 2000, description: "–¢–∞–ø–Ω–∏ 2 000 —á—Ç–æ –±—ã –∑–∞–≥–∞–¥–æ—á–Ω–∞—è —Ç—Ä—É–±–∞, –≤–µ–¥—É—â–∞—è –≤ –Ω–∏–∫—É–¥–∞, –≤–µ—Ä–Ω—É–ª–∞—Å—å –Ω–∞ –±–∞–∑—É." },
            { name: "–°–æ–±–µ—Ä–∏ –¥–æ–ª–≥ –ø–æ-—Å–æ—Å–µ–¥—Å–∫–∏", threshold: 5000, description: "–¢–∞–ø–Ω–∏ 5 000 —Ä–∞–∑, —á—Ç–æ–±—ã –æ–Ω –≤—Å–ø–æ–º–Ω–∏–ª, —á—Ç–æ –¥–æ–ª–∂–µ–Ω –∑–∞ –≥–∞–∑ –ø—Ä–æ—à–ª–æ–π –∑–∏–º–æ–π." },
            { name: "–≠–Ω–µ—Ä–≥–∏—è –æ—Ç—á–∞—è–Ω–∏—è", threshold: 7500, description: "–¢–∞–ø–Ω–∏ 7 500 —Ä–∞–∑, —á—Ç–æ–±—ã —Ç–≤–æ–π –ø–∞–ª–µ—Ü –≤—ã—Ä–∞–±–æ—Ç–∞–ª –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–µ–ø–ª–∞ –¥–ª—è –æ–±–æ–≥—Ä–µ–≤–∞ –æ–¥–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã." },
            { name: "–ú–∞—Å—Ç–µ—Ä –∏–ª–ª—é–∑–∏–π", threshold: 10000, description: "–¢–∞–ø–Ω–∏ 10 000 –ø–æ —ç–∫—Ä–∞–Ω—É –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —Å–æ–∑–¥–∞–≤ –≤–∏–¥–∏–º–æ—Å—Ç—å ¬´–≥–∞–∑–æ–≤–æ–≥–æ –ø—Ä–æ—Ä—ã–≤–∞¬ª." },
            { name: "–ö–∏–±–µ—Ä-–º—É–∂–∏–∫", threshold: 12500, description: "–ü—Ä–æ–∫–∞—á–∏–≤–∞–π –º—É–∂–∏–∫–∞ —Ç–∞–ø–∞–º–∏: —Ç–∞–ø–Ω–∏ 12 500 –∏ –æ–Ω –Ω–∞—É—á–∏—Ç—Å—è —á–∏–Ω–∏—Ç—å —Ç—Ä—É–±—ã –≤–∑–≥–ª—è–¥–æ–º." },
            { name: "–ì–∞–∑–æ–≤—ã–π –Ω–∏–Ω–¥–∑—è", threshold: 15000, description: "–¢–∞–ø–Ω–∏ –ø–æ 15 000 —Ä–∞–∑, –Ω–µ –¥–∞–≤ –µ–º—É –ø–æ–≥–∞—Å–∏—Ç—å —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–π –æ–≥–æ–Ω—ë–∫ –Ω–∞–¥–µ–∂–¥—ã." },
            { name: "–ß–µ—Å—Ç—å –∏–º–µ—é!", threshold: 20000, description: "–¢–∞–ø–Ω–∏ 20 000 —Ä–∞–∑, —á—Ç–æ–±—ã –Ω–µ –ø–æ–¥–Ω–∏–º–∞—Ç—å —Ç–∞—Ä–∏—Ñ—ã –Ω–∞ –∫–æ–º—É–Ω–∞–ª–∫—É." },
            { name: "–ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å", threshold: 30000, description: "–¢–∞–ø–Ω–∏ 30 000 —Ä–∞–∑, —á—Ç–æ–±—ã —Å–∫–∞–∑–∞—Ç—å —á—Ç–æ —Ç–∞–∫–æ–≥–æ –Ω–µ –±—ã–ª–æ." },
            { name: "–î—Ä—É–≥ –†—É–º—ã–Ω–∏–∏? –ú–æ–ª–¥–∞–≤–∏–∏? –ö—Ç–æ —Ç–∞–º?", threshold: 50000, description: "–¢–∞–ø–Ω–∏ 50 000 —Ä–∞–∑, –¥–∞–±—ã –∑–∞–¥—É–º–∞—Ç—å—Å—è ¬´–í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π –ø–æ—Å—Ç–∞–≤—â–∏–∫?¬ª." },
            { name: "–°–æ—Ü–∏–∞–ª—å–Ω—ã–π –≤–∑—Ä—ã–≤", threshold: 60000, description: "–¢–∞–ø–Ω–∏ 60 000 —Ä–∞–∑, —á—Ç–æ–±—ã –Ω–∞—Ä–æ–¥ —Ö–æ—Ä–æ–º –∫—Ä–∏–∫–Ω—É–ª: ¬´–ì–∞-–∞-–∞-–∑!¬ª." },
            { name: "–ö–≤–µ—Å—Ç ¬´–ü–ª–æ–º–±–∞¬ª", threshold: 75000, description: "–¢–∞–ø–Ω–∏ 75 000 —Ä–∞–∑, —á—Ç–æ–±—ã –ø–ª–æ–º–±–∞ ¬´–≤–æ–ª—à–µ–±–Ω—ã–º –æ–±—Ä–∞–∑–æ–º¬ª –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π." },
            { name: "–ì–∞–∑–æ–≤—ã–π –º–∞–≥–Ω–∞—Ç", threshold: 90000, description: "–ù–∞—Ç–∞–ø–∞–π 90 000 —Ä–∞–∑ –∏ –ø–æ–ª—É—á–∏ –∑–≤–∞–Ω–∏–µ ¬´–ü–æ—á—ë—Ç–Ω—ã–π —Å–ø–æ–Ω—Å–æ—Ä –æ–¥–Ω–æ–π —Ç—Ä—É–±—ã¬ª." },
            { name: "–°–µ–∑–æ–Ω–Ω–æ–µ —á—É–¥–æ", threshold: 100000, description: "–¢–∞–ø–Ω–∏ 100 000 —Ä–∞–∑ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: ¬´–ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –æ—Ç–æ–ø–ª–µ–Ω–∏–µ –æ—Ç –∂–∞—Ä—ã¬ª." },
            { name: "–ê–ª—Ö–∏–º–∏–∫", threshold: 150000, description: "–ù–∞—Ç–∞–ø–∞–π 150 000 —Ä–∞–∑ –∏ –ø–æ–ª—É—á–∏ ¬´–ì–æ—Ä—è—á–∏–π —á–∞–π –≤–º–µ—Å—Ç–æ –ø–∞—Ä–∞¬ª." },
            { name: "–ì–æ–ª—É–±–∞—è –º–µ—á—Ç–∞", threshold: 200000, description: "–ù–∞—Ç–∞–ø–∞–π 200 000 —Ä–∞–∑ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è ¬´–Ø –ø–æ—á—Ç–∏ —á—É–≤—Å—Ç–≤—É—é –∑–∞–ø–∞—Ö –∂–∞—Ä–µ–Ω–Ω—ã—Ö –∫–æ—Ç–ª–µ—Ç!¬ª." },
            { name: "–ì–µ—Ä–æ–π —Ç—Ä—ë—Ö –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤", threshold: 250000, description: "–ü–æ–º–æ–≥–∏ –º—É–∂–∏–∫—É –Ω–∞—Ç–∞–ø–∞—Ç—å 250 000 —Ä–∞–∑, —á—Ç–æ–±—ã –∏–≥—Ä–∞ –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∞ –µ–º—É –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ –†–§, –ú–æ–ª–¥–æ–≤—ã –∏ –£–∫—Ä–∞–∏–Ω—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ." },
            { name: "–ü–æ–≤–µ–ª–∏—Ç–µ–ª—å –≥–∞–∑–∞", threshold: 500000, description: "–ù–∞—Ç–∞–ø–∞–π 500 000 —Ä–∞–∑ —á—Ç–æ –±—ã —Å—Ç–∞—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º \"–¢—Ä–∞–Ω—Å–≥–∞–∑ –ü–ú–†\"" },
        ];
        
        // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–ï–†–ï–ú–ï–ù–ù–´–• ---
        let score = parseInt(localStorage.getItem(STORAGE_KEY_SCORE)) || 0;
        const tapTarget = document.getElementById('tap-target');
        const scoreDisplay = document.getElementById('score-display');
        const userIdDisplay = document.getElementById('user-id-display');
        const leaderboardButton = document.getElementById('leaderboard-button');
        const achievementsButton = document.getElementById('achievements-button');
        const leaderboardDataElement = document.getElementById('leaderboard-data');
        const achievedList = document.getElementById('achieved-list');
        const unachievedList = document.getElementById('unachieved-list');
        
        const detailModal = document.getElementById('achievement-detail-modal');
        const detailTitle = document.getElementById('achievement-detail-title');
        const detailDescription = document.getElementById('achievement-detail-description');
        
        // --- –§–£–ù–ö–¶–ò–ò –ú–û–î–ê–õ–¨–ù–´–• –û–ö–û–ù ---
        function openModal(id) {
            document.getElementById(id).style.display = 'flex';
        }

        window.closeModal = function(id) { 
            document.getElementById(id).style.display = 'none';
        }
        
        // --- –§–£–ù–ö–¶–ò–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø –î–û–°–¢–ò–ñ–ï–ù–ò–Ø–ú–ò ---
        
        /**
         * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–ø—Ä–∏ –∫–ª–∏–∫–µ –≤ —Å–ø–∏—Å–∫–µ)
         * @param {object} achievement - –û–±—ä–µ–∫—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
         * @param {number} achievementId - ID –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (1-based index –¥–ª—è –ø—É—Ç–∏ –∫ –∏–∫–æ–Ω–∫–µ)
         */
        function showAchievementDetail(achievement, achievementId) {
            const isAchieved = score >= achievement.threshold;
            // –§–æ—Ä–º–∏—Ä—É–µ–º –ø—É—Ç—å –∫ –∏–∫–æ–Ω–∫–µ: logo/1.png, logo/2.png, –∏ —Ç.–¥.
            const iconPath = `logo/${achievementId}.png`;

            // 1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            detailTitle.textContent = achievement.name;
            
            // 2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML-—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è (–≤–∫–ª—é—á–∞—è –∏–∫–æ–Ω–∫—É)
            let contentHTML = `
                <div style="text-align: center;">
                    <img src="${iconPath}" alt="${achievement.name}" class="achievement-detail-icon" style="border: 3px solid ${isAchieved ? '#32CD32' : '#FF4500'};">
                </div>
                <p style="font-size: 1.1em; color: #ccc; text-align: center; margin-bottom: 15px;">${achievement.description}</p>
            `;
            
            // 3. –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
            if (!isAchieved) {
                const remaining = achievement.threshold - score;
                contentHTML += `<p style="font-size: 1.2em; color: #FF4500; font-weight: bold; text-align: center;">–û—Å—Ç–∞–ª–æ—Å—å —Ç–∞–ø–æ–≤: ${remaining.toLocaleString()}</p>`;
            } else {
                contentHTML += `<p style="font-size: 1.2em; color: #32CD32; font-weight: bold; text-align: center;">–°—Ç–∞—Ç—É—Å: –ü–æ–ª—É—á–µ–Ω–æ! üéâ</p>`;
            }

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π HTML
            detailDescription.innerHTML = contentHTML;

            // –£–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ä—ã–µ —Å—Ç–∏–ª–∏, –µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ –æ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            detailModal.querySelector('.modal-content').style.boxShadow = '0 5px 25px rgba(0, 255, 255, 0.5)';
            detailTitle.style.color = '#FFD700';

            openModal('achievement-detail-modal');
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ç–∞–ø–µ)
        function showAchievementNotification(achievement) {
            detailTitle.textContent = `üåü –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ: ${achievement.name}`;
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã –Ω–µ —Å–ª–æ–º–∞—Ç—å —Ä–∞–∑–º–µ—Ç–∫—É, –µ—Å–ª–∏ –¥–æ —ç—Ç–æ–≥–æ –±—ã–ª –∫–ª–∏–∫ –Ω–∞ –¥–µ—Ç–∞–ª–∏
            detailDescription.innerHTML = `<p style="font-size: 1.1em; color: #ccc;">${achievement.description}</p>`; 
            
            // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            detailModal.querySelector('.modal-content').style.boxShadow = '0 5px 40px gold';
            detailTitle.style.color = 'gold';

            openModal('achievement-detail-modal');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
        function checkNewAchievements(oldScore, newScore) {
            ACHIEVEMENTS.forEach(ach => {
                // –£—Å–ª–æ–≤–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è: –°—Ç–∞—Ä—ã–π —Å—á–µ—Ç –±—ã–ª –º–µ–Ω—å—à–µ –ø–æ—Ä–æ–≥–∞, –∞ –Ω–æ–≤—ã–π —Å—á–µ—Ç - –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–µ–Ω
                if (oldScore < ach.threshold && newScore >= ach.threshold) {
                    showAchievementNotification(ach);
                }
            });
        }
        
        function updateAchievementsDisplay() {
            achievedList.innerHTML = '';
            unachievedList.innerHTML = '';

            ACHIEVEMENTS.forEach((ach, index) => { // –ò—Å–ø–æ–ª—å–∑—É–µ–º index –¥–ª—è ID –∏–∫–æ–Ω–∫–∏
                const isAchieved = score >= ach.threshold;
                const achievementId = index + 1; // 1-based index
                const progressText = isAchieved 
                    ? `–ü–æ–ª—É—á–µ–Ω–æ!` 
                    : `–¢—Ä–µ–±—É–µ—Ç—Å—è: ${ach.threshold.toLocaleString()} —Ç–∞–ø–æ–≤`;
                
                const achievementItem = document.createElement('div');
                achievementItem.classList.add('achievement-item');
                if (isAchieved) {
                    achievementItem.classList.add('achieved');
                }
                
                // --- –õ–û–ì–ò–ö–ê –î–õ–Ø –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –ó–ê–ú–ö–ê (SVG) ---
                // –û—Ç–∫—Ä—ã—Ç—ã–π –∑–∞–º–æ–∫ (–∑–µ–ª–µ–Ω—ã–π) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö.
                const lockIconOpen = `
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#32CD32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; min-width: 20px;">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                `;
                // –ó–∞–∫—Ä—ã—Ç—ã–π –∑–∞–º–æ–∫ (–∫—Ä–∞—Å–Ω—ã–π) –¥–ª—è –Ω–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö.
                const lockIconClosed = `
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FF4500" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; min-width: 20px;">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 7.23-4.66"></path>
                    </svg>
                `;
                
                const lockIcon = isAchieved ? lockIconOpen : lockIconClosed;
                
                achievementItem.innerHTML = `
                    <span class="achievement-title" style="display: flex; align-items: center;">
                        ${lockIcon} ${ach.name}
                    </span>
                    <span class="achievement-progress">
                        ${progressText}
                    </span>
                `;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ –æ–ø–∏—Å–∞–Ω–∏—è, –ø–µ—Ä–µ–¥–∞–≤–∞—è ID
                achievementItem.onclick = () => showAchievementDetail(ach, achievementId);

                if (isAchieved) {
                    achievedList.appendChild(achievementItem);
                } else {
                    unachievedList.appendChild(achievementItem);
                }
            });
            
            if (achievedList.children.length === 0) {
                achievedList.innerHTML = '<p style="font-style: italic;">–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.</p>';
            }
            if (unachievedList.children.length === 0) {
                unachievedList.innerHTML = '<p style="font-style: italic; color: #777;">–í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω—ã!</p>';
            }
        }
        
        
        // --- –°–õ–£–ñ–ï–ë–ù–´–ï –§–£–ù–ö–¶–ò–ò (ID, –õ–∏–¥–µ—Ä—ã, –ê–Ω–∏–º–∞—Ü–∏—è) ---
        function generateUserID() {
            return Math.floor(1000000 + Math.random() * 9000000).toString();
        }

        function setupUserID() {
            let userID = localStorage.getItem(STORAGE_KEY_ID);
            
            if (!userID) {
                userID = generateUserID();
                localStorage.setItem(STORAGE_KEY_ID, userID);
            }
            
            userIdDisplay.textContent = `ID: ${userID}`;
            return userID;
        }

        function generateLeaderboard() {
            const table = leaderboardDataElement;
            table.innerHTML = `
                <tr>
                    <th>‚Ññ</th>
                    <th>–ü–æ–º–æ—â–Ω–∏–∫</th>
                    <th>–¢–∞–ø–æ–≤</th>
                </tr>
            `;
            
            const currentUserID = setupUserID();
            const leaders = [
                { id: '4567890', score: 1250000, name: 'Terminator' },
                { id: '1234567', score: 980000, name: 'Neo' },
                { id: currentUserID, score: score, name: '–í—ã (–í–∞—à —Å—á–µ—Ç)' }, 
                { id: '8901234', score: 500000, name: 'Snoop' },
                { id: '5678901', score: 320000, name: 'Grom' },
            ].sort((a, b) => b.score - a.score); 
            
            for (let i = 0; i < 50; i++) {
                let leader;
                if (i < leaders.length) {
                    leader = leaders[i];
                } else {
                    leader = {
                        id: generateUserID(),
                        score: Math.floor(Math.random() * 100000) + 1000,
                        name: `Player_${i + 1}`
                    };
                }
                
                const row = table.insertRow();
                row.style.backgroundColor = (leader.id === currentUserID && leader.name === '–í—ã (–í–∞—à —Å—á–µ—Ç)') ? '#00FFFF30' : ''; 
                
                row.insertCell().textContent = i + 1;
                row.insertCell().textContent = leader.name;
                row.insertCell().textContent = leader.score.toLocaleString();
            }
        }
        
        function showFloatingPlusOne() {
            const rect = tapTarget.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            const plusOne = document.createElement('div');
            plusOne.textContent = '+1';
            plusOne.style.cssText = `
                position: fixed; 
                font-size: 2em;
                color: #FFD700; 
                font-weight: bold;
                top: ${centerY}px;
                left: ${centerX}px;
                transform: translate(-50%, -50%);
                animation: flyup 0.8s ease-out forwards; 
                pointer-events: none; 
                z-index: 100; 
            `;
            document.body.appendChild(plusOne);

            setTimeout(() => {
                plusOne.remove();
            }, 800);
        }
        
        // --- –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ---
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ID –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        setupUserID();
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å—á–µ—Ç–∞
        scoreDisplay.textContent = score.toLocaleString();
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –¢–∞–±–ª–∏—Ü—ã
        leaderboardButton.addEventListener('click', () => {
            generateLeaderboard();
            openModal('leaderboard-modal');
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        achievementsButton.addEventListener('click', () => {
            updateAchievementsDisplay(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º
            openModal('achievements-modal');
        });


        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–∞–ø–∞
        tapTarget.addEventListener('click', () => {
            const oldScore = score; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—á–µ—Ç –î–û —Ç–∞–ø–∞

            // 1. –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å—á–µ—Ç
            score++;
            scoreDisplay.textContent = score.toLocaleString();
            localStorage.setItem(STORAGE_KEY_SCORE, score); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—á–µ—Ç
            
            // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            checkNewAchievements(oldScore, score); 
            
            // 3. –°–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∞–Ω–∏–º–∞—Ü–∏—è
            tapTarget.src = IMAGE_TAPPED; 
            tapTarget.classList.add('tapped');
            
            setTimeout(() => {
                tapTarget.classList.remove('tapped');
            }, 100); 

            setTimeout(() => {
                tapTarget.src = IMAGE_IDLE; 
            }, 200); 

            showFloatingPlusOne();
        });

        // --- –ó–ê–ü–£–°–ö: –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ ---
        window.onload = () => {
            // openModal('welcome-modal'); // –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ
        };
        
    </script>

</body>
</html>